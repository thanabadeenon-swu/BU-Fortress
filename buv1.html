<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BU CyberFortress - Live AI Agent</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Kanit', sans-serif;
            background-color: #020617;
            color: #f1f5f9;
        }

        .code-font {
            font-family: 'Fira Code', monospace;
        }

        .glass-card {
            background: #0f172a;
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 12px;
        }

        .terminal {
            background: #000000;
            border: 1px solid #1e293b;
            border-radius: 8px;
            position: relative;
        }

        .log-entry {
            cursor: pointer;
            transition: all 0.2s;
            border-left: 2px solid transparent;
            padding: 2px 8px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .log-entry:hover {
            background: rgba(6, 182, 212, 0.1);
            border-left: 2px solid #06b6d4;
        }

        ::-webkit-scrollbar {
            width: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: #1e293b;
            border-radius: 10px;
        }

        .ai-glow {
            box-shadow: 0 0 20px rgba(6, 182, 212, 0.15);
            border: 1px solid rgba(6, 182, 212, 0.3);
        }

        @keyframes pulse-dot {
            0% { transform: scale(0.9); opacity: 0.7; }
            50% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(0.9); opacity: 0.7; }
        }

        .dot-live {
            animation: pulse-dot 1.5s infinite;
        }
    </style>
</head>

<body class="h-screen flex flex-col overflow-hidden">
    <header class="h-14 border-b border-white/5 flex items-center justify-between px-6 bg-slate-900/50 backdrop-blur-xl">
        <div class="flex items-center space-x-3">
            <div class="w-8 h-8 bg-cyan-600 rounded-lg flex items-center justify-center font-bold text-white shadow-lg shadow-cyan-900/20">
                BU
            </div>
            <div>
                <h1 class="text-sm font-bold tracking-tight text-white uppercase">
                    CyberFortress <span class="text-cyan-400 font-normal italic">Agent v2.5</span>
                </h1>
            </div>
        </div>
        <div class="flex items-center space-x-6">
            <div class="flex items-center space-x-2 px-3 py-1 bg-cyan-500/10 rounded-full border border-cyan-500/20">
                <span class="w-2 h-2 bg-cyan-400 rounded-full dot-live"></span>
                <span class="text-[10px] text-cyan-400 font-bold uppercase tracking-wider">Live Analysis</span>
            </div>
            <div class="text-right">
                <p class="text-[10px] text-slate-500 uppercase">System Status</p>
                <p class="text-[11px] text-green-400 font-bold uppercase">Optimized</p>
            </div>
        </div>
    </header>

    <main class="flex-grow flex p-4 gap-4 overflow-hidden">
        <aside class="w-1/4 flex flex-col gap-4 overflow-y-auto">
            <div class="glass-card p-4">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-[10px] font-bold text-slate-500 uppercase tracking-widest">Network Activity</h3>
                    <span class="text-[9px] text-cyan-400 font-mono">Real-time</span>
                </div>
                <div class="h-32">
                    <canvas id="trafficChart"></canvas>
                </div>
            </div>

            <div class="glass-card p-4">
                <h3 class="text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-4">Security Nodes</h3>
                <div class="space-y-2">
                    <div class="flex items-center justify-between p-2 bg-slate-800/30 rounded border border-white/5">
                        <span class="text-xs text-slate-300">Edge Gateway</span>
                        <div class="flex items-center">
                            <span id="node-edge" class="text-[9px] text-green-400 mr-2">SECURE</span>
                            <div class="w-1.5 h-1.5 rounded-full bg-green-500"></div>
                        </div>
                    </div>
                    <div class="flex items-center justify-between p-2 bg-slate-800/30 rounded border border-white/5">
                        <span class="text-xs text-slate-300">Core Switch</span>
                        <div class="flex items-center">
                            <span class="text-[9px] text-green-400 mr-2">SECURE</span>
                            <div class="w-1.5 h-1.5 rounded-full bg-green-500"></div>
                        </div>
                    </div>
                    <div class="flex items-center justify-between p-2 bg-slate-800/30 rounded border border-white/5">
                        <span class="text-xs text-slate-300">Web Cluster</span>
                        <div class="flex items-center">
                            <span class="text-[9px] text-yellow-400 mr-2">LOAD</span>
                            <div class="w-1.5 h-1.5 rounded-full bg-yellow-500"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="glass-card p-4 bg-gradient-to-br from-slate-800 to-slate-900 mt-auto">
                <h3 class="text-[10px] font-bold text-slate-400 uppercase mb-2">PDPA Compliance Status</h3>
                <div class="flex items-center gap-3">
                    <div class="text-2xl">üìë</div>
                    <div class="text-[10px] text-slate-400 leading-tight">
                        <span class="text-green-400 block font-bold">Encrypted Storage Active</span>
                        Logs containing PII are automatically masked.
                    </div>
                </div>
            </div>
        </aside>

        <section class="flex-grow flex flex-col gap-4">
            <div class="glass-card flex-grow flex flex-col overflow-hidden shadow-2xl">
                <div class="p-3 border-b border-white/5 flex justify-between items-center bg-slate-900/80">
                    <h2 class="text-xs font-bold text-slate-400 uppercase tracking-widest flex items-center">
                        <span class="mr-2 text-cyan-500">‚óà</span> Live Console Output
                    </h2>
                    <div class="flex gap-2">
                        <button onclick="triggerAttack()" class="bg-red-600 hover:bg-red-500 text-white text-[10px] px-3 py-1 rounded-md font-bold transition shadow-lg shadow-red-900/20 uppercase">
                            Execute Attack Simulation
                        </button>
                        <button onclick="clearConsole()" class="bg-slate-700 hover:bg-slate-600 text-[10px] px-3 py-1 rounded-md text-slate-300 uppercase">
                            Clear
                        </button>
                    </div>
                </div>
                <div id="consoleFeed" class="flex-grow p-4 terminal text-[11px] code-font overflow-y-auto space-y-0.5" onmouseenter="pauseLogs(true)" onmouseleave="pauseLogs(false)">
                    </div>
                <div class="p-2 bg-black border-t border-white/5 flex justify-between text-[9px] text-slate-600 uppercase font-mono">
                    <span>Buffer: 100/1000 lines</span>
                    <span id="auto-status">‚óè Log Streaming Active</span>
                </div>
            </div>

            <div class="grid grid-cols-3 gap-3 h-24">
                <button onclick="aiAction('summary')" class="glass-card p-3 hover:bg-slate-800 transition text-left flex flex-col justify-between">
                    <span class="text-[10px] text-cyan-400 font-bold">#REPORT_GEN</span>
                    <span class="text-[11px] text-slate-400 leading-tight">‡∏™‡∏£‡∏∏‡∏õ‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</span>
                </button>
                <button onclick="aiAction('pdpa')" class="glass-card p-3 hover:bg-slate-800 transition text-left flex flex-col justify-between border-b-2 border-yellow-500/50">
                    <span class="text-[10px] text-yellow-500 font-bold">#PDPA_COMPLIANCE</span>
                    <span class="text-[11px] text-slate-400 leading-tight">‡∏£‡πà‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏•‡∏∞‡πÄ‡∏°‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•</span>
                </button>
                <button onclick="aiAction('scan')" class="glass-card p-3 hover:bg-slate-800 transition text-left flex flex-col justify-between">
                    <span class="text-[10px] text-green-500 font-bold">#VULN_SCANNER</span>
                    <span class="text-[11px] text-slate-400 leading-tight">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ä‡πà‡∏≠‡∏á‡πÇ‡∏´‡∏ß‡πà‡∏û‡∏≠‡∏£‡πå‡∏ï‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å</span>
                </button>
            </div>
        </section>

        <section class="w-1/3 flex flex-col glass-card ai-glow overflow-hidden">
            <div class="p-4 border-b border-white/5 bg-slate-900 flex items-center gap-3">
                <div class="w-10 h-10 rounded-full bg-cyan-600 flex items-center justify-center text-white shadow-inner">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                    </svg>
                </div>
                <div>
                    <h3 class="text-sm font-bold text-white">AI Cyber Sentinel</h3>
                    <p class="text-[10px] text-cyan-400 uppercase font-mono">Autonomous Analyst Ready</p>
                </div>
            </div>

            <div id="chatBox" class="flex-grow p-4 overflow-y-auto space-y-4 text-xs">
                <div class="flex justify-start">
                    <div class="bg-slate-800/80 p-3 rounded-2xl rounded-tl-none border border-white/5 max-w-[90%] text-slate-300 leading-relaxed shadow-sm">
                        ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ú‡∏°‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° Log ‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ö‡∏ö‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏ï‡πà‡∏≠‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ <br><br>
                        ‡∏´‡∏≤‡∏Å‡∏Ñ‡∏∏‡∏ì‡∏™‡∏á‡∏™‡∏±‡∏¢‡πÉ‡∏ô Log ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÉ‡∏î **‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà Log ‡∏ô‡∏±‡πâ‡∏ô** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ú‡∏°‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏ä‡∏¥‡∏á‡∏•‡∏∂‡∏Å‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö
                    </div>
                </div>
            </div>

            <div class="p-4 bg-slate-900 border-t border-white/5">
                <div class="flex gap-2">
                    <input id="userInput" type="text" placeholder="‡∏ñ‡∏≤‡∏° AI ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏∞‡∏ö‡∏∏‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á..." class="flex-grow bg-slate-800 border border-slate-700 rounded-lg py-2.5 px-4 text-xs focus:outline-none focus:border-cyan-500 transition-colors">
                    <button onclick="sendUserMessage()" class="bg-cyan-600 hover:bg-cyan-500 text-white p-2.5 rounded-lg transition shadow-lg shadow-cyan-900/20">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </section>
    </main>

    <script>
        const consoleFeed = document.getElementById('consoleFeed');
        const chatBox = document.getElementById('chatBox');
        const userInput = document.getElementById('userInput');
        const nodeEdge = document.getElementById('node-edge');
        let isPaused = false;

        // 1. Live Log Generator
        const logTypes = [
            { msg: "INFO: Outbound connection to 10.12.x.xx established", level: 'info' },
            { msg: "INFO: Heartbeat check - Gateway Node 01: OK", level: 'info' },
            { msg: "INFO: User 'admin_soc' authenticated via MFA", level: 'info' },
            { msg: "DEBUG: TCP Packet filtering rules re-applied", level: 'info' },
            { msg: "INFO: System health check - CPU: 12%, Mem: 45%", level: 'info' },
            { msg: "INFO: Automatic log rotation completed successfully", level: 'info' },
            { msg: "WARN: Unidentified traffic pattern from subnet 192.x.x.x", level: 'warn' }
        ];

        function createLog(msg, level = 'info') {
            if (isPaused && level !== 'alert') return;

            const div = document.createElement('div');
            const time = new Date().toLocaleTimeString('en-GB', { hour12: false });
            let colorClass = 'text-slate-500';

            if (level === 'warn') colorClass = 'text-yellow-500';
            if (level === 'alert') colorClass = 'text-red-500 font-bold bg-red-500/5 py-1 px-2 border-y border-red-500/10 my-1';

            div.className = `log-entry ${colorClass} animate-in slide-in-from-left-1 duration-200`;
            div.innerHTML = `<span class="opacity-40 mr-2">[${time}]</span> ${msg}`;
            div.onclick = () => investigateLog(msg, level, time);
            
            consoleFeed.appendChild(div);
            consoleFeed.scrollTop = consoleFeed.scrollHeight;

            // Keep buffer clean
            if (consoleFeed.childNodes.length > 50) consoleFeed.removeChild(consoleFeed.firstChild);
        }

        // Auto-run Loop
        setInterval(() => {
            const pick = logTypes[Math.floor(Math.random() * logTypes.length)];
            createLog(pick.msg, pick.level);
        }, 2500);

        function pauseLogs(val) {
            isPaused = val;
            document.getElementById('auto-status').innerText = val ? "‚è∏ Stream Paused (Investigating)" : "‚óè Log Streaming Active";
            document.getElementById('auto-status').className = val ? "text-yellow-600" : "text-slate-600";
        }

        // 2. Interaction Logic
        function investigateLog(msg, level, time) {
            pushUserMessage(`‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå Log ‡∏ô‡∏µ‡πâ: "${msg}"`);
            setTimeout(() => {
                let report = "";
                if (level === 'alert') {
                    report = `
                        <div class="space-y-2">
                            <p class="text-red-400 font-bold uppercase tracking-tight">üö® Critical Threat Detected</p>
                            <p>‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÄ‡∏à‡∏≤‡∏∞‡∏£‡∏∞‡∏ö‡∏ö‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (SQL Injection) ‡∏à‡∏≤‡∏Å IP ‡∏ô‡∏≠‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢</p>
                            <div class="p-2 bg-black/40 rounded border border-red-500/20 font-mono text-[10px] mt-1">
                                [Source] 203.11.xxx.xx (Masked)<br>
                                [Target] DB_USER_PROD<br>
                                [Pattern] 1' OR '1'='1
                            </div>
                            <p class="text-[11px] pt-1">**Compliance:** ‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ô‡∏µ‡πâ‡∏à‡∏±‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ï‡πà‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏• (PII) ‡∏ï‡∏≤‡∏° PDPA ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ï‡∏≤‡∏°‡∏°‡∏≤‡∏ï‡∏£‡∏≤ 37(4) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏∞‡∏á‡∏±‡∏ö‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡∏°‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö</p>
                            <div class="flex gap-2 pt-1">
                                <button onclick="aiReply('Block IP ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢')" class="bg-red-600 px-2 py-1 rounded text-[10px] text-white">BLOCK IP</button>
                                <button onclick="aiAction('pdpa')" class="bg-slate-700 px-2 py-1 rounded text-[10px] text-white italic underline">DRAFT PDPA REPORT</button>
                            </div>
                        </div>`;
                } else if (level === 'warn') {
                    report = `
                        <p class="text-yellow-500 font-bold">‚ö†Ô∏è Security Warning</p>
                        <p>‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡∏Ñ‡∏•‡πâ‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏Å‡∏ô‡∏û‡∏≠‡∏£‡πå‡∏ï (Port Scan) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏≤‡∏ä‡πà‡∏≠‡∏á‡πÇ‡∏´‡∏ß‡πà ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏ù‡πâ‡∏≤‡∏£‡∏∞‡∏ß‡∏±‡∏á Source IP ‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ 24 ‡∏ä‡∏°. ‡∏Ñ‡∏£‡∏±‡∏ö</p>`;
                } else {
                    report = `<p>Log ‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥ (System Routine) ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö</p>`;
                }
                aiReply(report);
            }, 600);
        }

        function triggerAttack() {
            createLog("CRITICAL: SQL Injection pattern detected in POST /api/auth/login", 'alert');
            createLog("ALERT: Data exfiltration attempt suspected from 203.11.xxx.xx", 'alert');
            nodeEdge.innerText = "ATTACKED";
            nodeEdge.className = "text-[9px] text-red-500 mr-2 font-bold";
            aiReply("‚ö†Ô∏è **‡∏û‡∏ö‡∏Å‡∏≤‡∏£‡πÇ‡∏à‡∏°‡∏ï‡∏µ‡∏ó‡∏≤‡∏á‡πÑ‡∏ã‡πÄ‡∏ö‡∏≠‡∏£‡πå!** ‡∏ú‡∏°‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏à‡∏°‡∏ï‡∏µ‡∏ó‡∏µ‡πà‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà Log ‡∏™‡∏µ‡πÅ‡∏î‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ä‡∏¥‡∏á‡∏•‡∏∂‡∏Å‡πÅ‡∏•‡∏∞‡∏£‡πà‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡πà‡∏á ‡∏™‡∏Å‡∏°‡∏ä. ‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö");
        }

        function clearConsole() {
            consoleFeed.innerHTML = '';
            nodeEdge.innerText = "SECURE";
            nodeEdge.className = "text-[9px] text-green-400 mr-2";
        }

        // 3. UI Helpers
        function aiReply(html) {
            const div = document.createElement('div');
            div.className = "flex justify-start animate-in slide-in-from-left-2 duration-300";
            div.innerHTML = `
                <div class="bg-slate-800 p-3 rounded-2xl rounded-tl-none border border-cyan-500/30 max-w-[95%] text-slate-300 shadow-xl shadow-cyan-900/5">
                    ${html}
                </div>`;
            chatBox.appendChild(div);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        function pushUserMessage(text) {
            const div = document.createElement('div');
            div.className = "flex justify-end animate-in slide-in-from-right-2 duration-300";
            div.innerHTML = `
                <div class="bg-cyan-600 p-2.5 px-4 rounded-2xl rounded-tr-none max-w-[85%] text-white shadow-lg text-xs">
                    ${text}
                </div>`;
            chatBox.appendChild(div);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        function aiAction(key) {
            if (key === 'summary') {
                pushUserMessage("‡∏Ç‡∏≠‡∏™‡∏£‡∏∏‡∏õ‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô");
                setTimeout(() => aiReply("üìä **‡∏™‡∏£‡∏∏‡∏õ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ:** ‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö‡∏Å‡∏≤‡∏£‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÄ‡∏à‡∏≤‡∏∞‡∏£‡∏∞‡∏ö‡∏ö 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á (‡∏¢‡∏±‡∏ö‡∏¢‡∏±‡πâ‡∏á‡πÅ‡∏•‡πâ‡∏ß) ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏õ‡∏Å‡∏ï‡∏¥ 14,202 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÇ‡∏î‡∏¢‡∏£‡∏ß‡∏°‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå **‡∏ï‡πà‡∏≥ (Low)** ‡∏Ñ‡∏£‡∏±‡∏ö"), 800);
            }
            if (key === 'pdpa') {
                pushUserMessage("‡∏£‡πà‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô PDPA ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î");
                setTimeout(() => aiReply("üìÑ **Draft Report:** ‡∏û‡∏ö‡∏Å‡∏≤‡∏£‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (Personal Data) ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏£‡∏∞‡∏á‡∏±‡∏ö‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ï‡∏≤‡∏° PDPA ‡∏°‡∏≤‡∏ï‡∏£‡∏≤ 37 ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡πà‡∏ß‡πÑ‡∏´‡∏•‡∏™‡∏π‡πà‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å (Data Loss: 0) ‡∏Ñ‡∏£‡∏±‡∏ö"), 1000);
            }
            if (key === 'scan') {
                pushUserMessage("‡∏™‡∏±‡πà‡∏á‡∏™‡πÅ‡∏Å‡∏ô‡∏´‡∏≤‡∏ä‡πà‡∏≠‡∏á‡πÇ‡∏´‡∏ß‡πà‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö");
                setTimeout(() => aiReply("üîç **Scanning...** ‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏Å‡∏ô‡∏û‡∏≠‡∏£‡πå‡∏ï 1-65535 ‡∏ö‡∏ô Edge Gateway ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏û‡∏≠‡∏£‡πå‡∏ï‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏ó‡∏¥‡πâ‡∏á‡πÑ‡∏ß‡πâ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö ‚úÖ"), 1500);
            }
        }

        function sendUserMessage() {
            const val = userInput.value;
            if (!val) return;
            pushUserMessage(val);
            userInput.value = '';
            setTimeout(() => aiReply("‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏£‡∏∞‡∏ö‡∏∏... ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ‡∏ú‡∏° '‡∏™‡∏£‡∏∏‡∏õ' ‡∏´‡∏£‡∏∑‡∏≠ '‡∏ö‡∏•‡πá‡∏≠‡∏Å IP' ‡πÑ‡∏î‡πâ‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö"), 800);
        }

        // 4. Charting
        const tCtx = document.getElementById('trafficChart').getContext('2d');
        new Chart(tCtx, {
            type: 'line',
            data: {
                labels: ['5s', '4s', '3s', '2s', '1s', 'Now'],
                datasets: [{
                    data: [12, 19, 15, 22, 60, 45],
                    borderColor: '#06b6d4',
                    borderWidth: 2,
                    pointRadius: 0,
                    tension: 0.4,
                    fill: true,
                    backgroundColor: 'rgba(6, 182, 212, 0.1)'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    x: { display: false },
                    y: { display: false }
                }
            }
        });

        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendUserMessage();
        });
    </script>
</body>

</html>